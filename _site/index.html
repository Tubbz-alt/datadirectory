<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="/datadirectory/css/main.css">
<link rel="stylesheet" href="/datadirectory/assets/js/modernizr.js">
<!-- used for the remote -->
<link rel="stylesheet" href="/directory/css/main.css">
<link rel="stylesheet" href="/directory/assets/js/modernizr.js">
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.0/knockout-min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.2/js/select2.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.2/js/i18n/uk.js"></script>
<link rel="stylesheet" type="text/css" href="https://data.england.nhs.uk/fanstatic/vendor/:version:2015-03-25T08:33:17.31/select2/select2.css" />

  </head>
  <body class="mikes-design">
    <!-- top banner  -->

<div class="top-banner">
  <div class="grid inner-container">
    <div style="font-size: 21px;" class="grid__item one-third">
      <a class="banner-link" href="/datadirectory/">Open Health Data<br />Project Showcase</a>
    </div><div class="grid__item one-third"></div><!--
    --><div class="grid__item one-third" style="text-align: right">
      <div class="logo"></div>
    </div>
  </div>
</div>

<div class="top-banner">
  <div class="grid inner-container">
    <h1>
      revealing the products and projects using <br /> <strong>healthcare open data</strong> to make an impact
    </h1>
  </div>
</div>
<div class="main-container">
  <form class="form-search" style="margin-top: 20px">
    <div class="form-element"><input placeholder="Search ..." data-bind="value: currentFilter, valueUpdate: 'afterkeydown'" type="text"></input></div><!--
    --><div class="form-element"><select>
      <option>find stuff</option>
    </select></div><!--
    --><div class="form-element"><select class="select-box">
      <option>find other stuff</option>
    </select></div><!--
    --><div class="form-btn"><a class="btn 2btn-primary" href="">SEARCH</a></div>
  </form>
</div>
<div class="grid-description">
  <div data-bind="if: displayedItems().length === items().length" class="grid-description-title">Showing all <span data-bind="text: filteredItems().length"></span> projects</div>
  <div data-bind="if: displayedItems().length !== items().length" class="grid-description-title">Showing <span data-bind="text: displayedItems().length"></span> out of <span data-bind="text: items().length"></span>  projects</div>
  <hr>
</div>
<div class="main-container">
  <div class="project-grid-outer-container">
    <div data-bind="foreach: displayedItems" class="project-grid-inner-container grid"><div class="project-element-outer-container"><a data-bind="attr: { href: url }" class="project-element">
        <img data-bind="attr: {src: img}">
        <div class="project-element-text">
          <p data-bind="text: title" ></p>
          <p data-bind="text: author" ></p>
        </div>
    </a></div></div>
  </div>

  <nav data-bind="if: $root.numPages() > 1" style="text-align: center">
    <ul class="main-pagination">
        <li>
            <a href="#" data-bind="click: function(){ pageNumber(pageNumber() - 1)}, css: {disabled: pageNumber() === 0}">previous</a>
        </li>
        <!-- ko foreach: pagesArray -->
        <li><a href="#" data-bind="click: function(){ $root.pageNumber($index()) }, css: {active: $index() === $root.pageNumber()}">
          <span data-bind="text: $index() + 1"></span>
        </a></li>
        <!-- /ko -->
        <li>
            <a href="#" data-bind="click: function(){ pageNumber(pageNumber() + 1)}, css: {disabled: pageNumber() === ($root.pagesArray().length - 1)}">next</a>
        </li>
    </ul>
  </nav>


</div>
<div class="footer">
  <div class="project-grid-outer-container">
    <div class="grid__item desk--one-third text-centre">
      <i class="icon download"></i>
      <p><b>Download Data</b></p>
      <p>Get all of the information on this site as Open Data</p>
      <a class="">Download</a>
    </div><div class="grid__item desk--one-third text-centre">
      <i class="icon feedback"></i>
      <p><b>Give us feedback</b></p>
      <p>Got ideas or suggestions? <br />Get in touch<p/>
      <a class="">Feedback</a>
    </div><div class="grid__item desk--one-third text-centre">
      <i class="icon submit"></i>
      <p><b>Submit your project</b></p>
      <p>Have you worked on a relevant project? Let us know</p>
      <a href="">Submit</a>
    </div>
  </div>
</div>

<div class="base-footer"></div>
<script>
  ["\n","\n","\n","\n","\n","\n","\n","\n"]
  var json = [
  
      {
        "title"   : "Why Children Die",
        "author"  : "RCPCH",
        "url"     : "/datadirectory//2016/05/04/why-children-die.html",
        "img"     : "http://www.rcpch.ac.uk/sites/default/files/asset_library/Policy%20and%20Standards/Policy%20Documents/RCPCH_Jh_5911Deaths%20ceropped2.png"
      } ,
  
      {
        "title"   : "Which doctors take up promising ideas?",
        "author"  : "Nesta",
        "url"     : "/datadirectory//2016/05/04/which-doctors-take-up-promising-ideas.html",
        "img"     : "http://www.nesta.org.uk/sites/default/files/styles/timeline_360/public/innovation_in_public_services_infographic.jpg?itok=MeYbA2Zk"
      } ,
  
      {
        "title"   : "Prescribing Analytics",
        "author"  : "Prescribing Analytics",
        "url"     : "/datadirectory//2016/05/04/prescribing-analytics.html",
        "img"     : "http://bd7a65e2cb448908f934-86a50c88e47af9e1fb58ce0672b5a500.r32.cf3.rackcdn.com/uploads/assets/legacy/PA-screenshot-500wide.jpg"
      } ,
  
      {
        "title"   : "Open Prescribing ",
        "author"  : "EBM DATA LAB",
        "url"     : "/datadirectory//2016/05/04/open-prescribing.html",
        "img"     : "https://ebmdatalab.net/images/portfolio/openprescribing.png"
      } ,
  
      {
        "title"   : "Mapping English GP prescribing data",
        "author"  : "Dr Peter J Diggle",
        "url"     : "/datadirectory//2016/05/04/mapping-english-gp-prescribing-data.html",
        "img"     : "http://bmjopen.bmj.com/content/3/1/e001363/F7.medium.gif"
      } ,
  
      {
        "title"   : "Living a Long Life?",
        "author"  : "Open Public Services Network",
        "url"     : "/datadirectory//2016/05/04/living-a-long-life.html",
        "img"     : "https://www.thersa.org/globalassets/pdfs/opsn/mental-health-maps/maps_psych-therapies-w-logo-700.jpg"
      } ,
  
      {
        "title"   : "GP Prescribing in 2014: Constituency Statistics",
        "author"  : "House of Commons Library",
        "url"     : "/datadirectory//2016/05/04/gp-prescribing-in-2014-constituency-statistics.html",
        "img"     : "http://researchbriefings.files.parliament.uk/documents/CBP-7161/assets/e5856cb0-9d90-4ffd-8b64-037125226dff.png"
      } ,
  
      {
        "title"   : "clinical calculator API",
        "author"  : "openhealthhub CIC",
        "url"     : "/datadirectory//2016/05/04/clinical-calculator-api.html",
        "img"     : "http://obesitychallenge.rewiredstate.org/webhook-uploads/1441207772961/cc.jpg"
      } 
  
  ]

  var AppViewModel = function(){
      var self = this;
      var paginationAmount = 9;
      this.items = ko.observableArray(json);
      this.currentFilter = ko.observable();
      this.pageNumber = ko.observable(0);

      /*
        pagination will be done in blocks of 9
      */

      this.filteredItems = ko.computed(function() {
          if(!self.currentFilter() || !self.currentFilter().length){
              return self.items();
          } else {
              return ko.utils.arrayFilter(self.items(), function(prod) {
                  return prod.title.toLowerCase().indexOf(self.currentFilter().toLowerCase()) !== -1
              });
          }
      });

      this.numPages = ko.computed(function(){
          return Math.ceil(self.filteredItems().length/paginationAmount);
      });

      this.displayedItems = ko.computed(function(){
          var a = self.pageNumber()*paginationAmount;
          return self.filteredItems().slice(a, a + paginationAmount)
      });

      this.pagesArray = ko.computed(function(){ return new Array(self.numPages()) });
  }

  var mpv = new AppViewModel();
  window.mpv = mpv;
  ko.applyBindings(mpv);
</script>

  </body>

</html>
