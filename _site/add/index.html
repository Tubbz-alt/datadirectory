<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="description" content="Open Health Data Project Showcase">
<meta name="keywords" content="Open data,open,data,nhs">
<meta name="author" content="NHS England">

<!-- Facebook -->
<meta property="og:description" content="Revealing the products and projects using healthcare open data to make an impact"/>
<meta property="og:url" content="data.england.nhs.uk/"/>
<meta property="og:image" content="www.england.nhs.uk/wp-content/themes/nhsengland/templates/../assets/img/nhs-england-logo.png"/>
<meta property="og:type" content="article or website or product"/>
<meta property="og:site_name" content="Open Health Data Project Showcase"/>


<!-- Twitter -->
<meta name="twitter:card" content="Revealing the products and projects using healthcare open data to make an impact">
<meta name="twitter:site" content="@NHSEngland">
<meta name="twitter:title" content= "Open Health Data Project Showcase">
<meta name="twitter:description" content="Revealing the products and projects using healthcare open data to make an impact">
<meta name="twitter:creator" content="eg:author name">
<meta name="twitter:image:src" content="http://www.england.nhs.uk/wp-content/themes/nhsengland/templates/../assets/img/nhs-england-logo.png">
<meta name="twitter:domain" content="http://data.england.nhs.uk/">



<link rel="stylesheet" href="/datadirectory/css/main.css">
<!-- used for the remote -->

<link rel="stylesheet" href="/directory/css/main.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.2/css/select2.css">

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.0/knockout-min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.11.2/lodash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.2/js/select2.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.2/js/i18n/uk.js"></script>
<script src="/datadirectory/assets/js/modernizr.js"></script>
<link rel="stylesheet" type="text/css" href="https://data.england.nhs.uk/fanstatic/vendor/:version:2015-03-25T08:33:17.31/select2/select2.css" />
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css">

  </head>
  <body>

    <div class="top-banner">
  <div class="inner-container">
    <div class="grid">
      <div class="grid__item one-third">
        <a class="banner-link" href="/datadirectory">Open Health Data<br />Project Showcase</a>
      </div><div class="grid__item one-third"></div><!--
      --><div class="grid__item one-third" style="text-align: right">
        <div class="logo"></div>
      </div>
    </div>
  </div>
</div>

<div class="outer-main-container">
  <div data-bind="ifnot: submitted" class="main-container">
    <h2>Open Health Data Usage</h2>
    <form data-bind="submit: postForm">
      <div class="grid">
        <div class="long-form">
          <label for="projectName">
            <div class="required">What is the name of your project?</div>
            <input data-bind="value: form.name, css: {error: invalid.name}" type="text">
          </label>
        </div>
        <div class="long-form">
          <label>
            Does your project have a website?
            <small class="help-text">
              We'd like to be able to link people to your project later on - if it's online please provide the url
            </small>
            <input data-bind="value: form.website"  type="text">
          </label>
        </div>
        <div class="long-form">
          <label>
            <div class="required">How did you use open health data?</div>
            <small class="help-text">
              We're looking to understand what your project does, what it's for, and how you used open health data
            </small>
            <textarea data-bind="value: form.how, css: {error: invalid.how}"></textarea>
          </label>
        </div>
        <div class="long-form">
          <label>
            <div class="required">What was the impact of your project?</div>
            <small class="help-text">
              We're trying to understand what happens next after people create their projects.
            </small>
            <textarea data-bind="value: form.impact, css: {error: invalid.impact}"></textarea>
          </label>
        </div>
        <div class="long-form">
          <label>What datasets did you use in your project? (Please include links if possible)
            <small class="help-text">
              We're trying to find out what currently available datasets people are finding most useful, and also map the space of open health data usage
            </small>
            <textarea data-bind="value: form.datasets"></textarea>
          </label>
        </div>
        <div class="long-form">
          <label>
            Is there an image that represents your project?
            <small class="help-text">
              We'd like show images that represent projects if we're linking to them.
            </small>
            <input data-bind="value: form.image" placeholder="If you have a logo or screenshot of your project online, please provide a link here" type="text">
          </label>
        </div>
        <div class="long-form">
          <label>What is the name of your organisation?
            <small class="help-text">If your project wasn't related to an organisation, that's ok too</small>
            <input data-bind="value: form.organisation" type="text">
          </label>
        </div>
        <div class="long-form">
          <label>
            What does your organisation do?
            <textarea data-bind="value: form.organisationPurpose"></textarea>
          </label>
        </div>
        <div class="long-form">
          <label>
            If your organisation is a company, what is your company number?
            <small class="help-text">This lets us understand what kind of companies are using open health data</small>
            <input data-bind="value: form.companyNumber" type="text">
          </label>
        </div>
        <div class="long-form">
          <label>
            <div class="required">What is your email address?</div>
            <small class="help-text">Just in case we want to get in touch to find out more.</small>
            <input data-bind="value: form.email, css: {error: invalid.email}" type="text">
        </div>
        <div class="long-form">
          <label>
            Do you mind us publishing your contact details so people can get in touch with you about your project?
            <input data-bind="checked: form.contactable" type="checkbox">
          </label>
        </div>
        <div class="long-form">
          <label>
            Any other comments / feedback for us?
            <small class="help-text">Have we forgotten anything? Was anything on this form confusing? Just want to say hello?</small>
            <textarea data-bind="value: form.otherComments"></textarea>
          </label>
        </div>
        <div data-bind="if: errored" class="grid error">
          <div class="long-form text-centre error">
            Please fill in the required fields
          </div>
        </div>
      <div class="long-form text-centre">
        <button class="btn btn-primary btn-lg" type="submit">Add</button>
      </div>
    </div>
  </form>
  </div>
  <div data-bind="if: submitted" class="main-container">
    <h2>Thank You!</h2>
    <h4 class="text-centre">
      We appreciate your input, we'll take a look and hopfully get in touch
      with you soon
    </h4>
    <div class="grid text-centre">
        <a href="/datadirectory" class="btn btn-primary btn-lg success-btn">Back to the data directory</a>
    </div>
  </div>
</div>
<script>
  (function(){
      var AppViewModel = function(){
        var requiredFields = ["name", "how", "impact", "email"];
        var self = this;
        this.form = {contactable: false};
        this.invalid = {};
        this.errored = ko.observable(false);
        this.submitted = ko.observable(false);

        _.each(requiredFields, function(requiredField){
          self.form[requiredField] = ko.observable("");
          self.invalid[requiredField] = ko.observable(false);
          self.form[requiredField].subscribe(function(newValue){
              self.validateField(requiredField);
          });
        });

        this.validateField = function(requiredField){
          if(!self.form[requiredField]().length){
            self.invalid[requiredField](true)
            return requiredField;
          }
          else{
            self.invalid[requiredField](false)
          }
        }

        this.isValid = function(){
           return true;
           var invalidFields = _.map(requiredFields, function(requiredField){
              return self.validateField(requiredField);
           });

           var isValid = !_.compact(invalidFields).length;
           self.errored(!isValid);
           return isValid;
        }

        var camelCaseToSpace = function(someStr){
            return someStr.replace(/([A-Z])/g, ' $1').replace(/^./, function(str){ return str.toUpperCase(); })
        }

        this.postForm = function(){
          if(self.isValid()){
            // post
            var postDict = {
                z_name: ko.utils.unwrapObservable(self.form.name),
                z_email: ko.utils.unwrapObservable(self.form.email),
                z_subject: "Data directory form",
            };

            other_values = _.filter(self.form, function(v, k){
                if(k === "name" || k === "email"){
                   return false;
                }
                return true;
            })

            postDict.z_description = _.map(self.form, function(v, k){
              if(k !== "name" && k !== "email"){
                return(camelCaseToSpace(k) + ": " + ko.utils.unwrapObservable(v));
              }
            }).join("\n");

            $.post(//datadirectory/contact/index.php', postDict).then(
              function(){
                $("body").scrollTop(0);
                self.submitted(true);
              }
            )
            return false;
          }

          return false;
        }
      }
      var mpv = new AppViewModel();
      ko.applyBindings(mpv);
  }());
</script>

    <div class="footer">
  <div class="project-grid-outer-container">
    <div class="grid__item desk--one-third text-centre">
      <i class="icon download"></i>
      <p><b>Download Data</b></p>
      <p>Get all of the information on this site as Open Data</p>
      <a href="https://data.england.nhs/dataset/datadirectory" class="btn btn-primary">Download</a>
    </div><div class="grid__item desk--one-third text-centre">
      <i class="icon feedback"></i>
      <p><b>Give us feedback</b></p>
      <p>Got ideas or suggestions? <br />Get in touch<p/>
      <a href="" id="feedback" class="btn btn-primary">Feedback</a>
    </div><div class="grid__item desk--one-third text-centre">
      <i class="icon submit"></i>
      <p><b>Submit your project</b></p>
      <p>Have you worked on a relevant project? Let us know</p>
      <a href="/datadirectory/add" class="btn btn-primary" >Submit</a>
    </div>
  </div>
</div>
<div class="base-footer">
  <div class="project-grid-outer-container spaced">
    <div class="grid">
      <div class="grid__item palm--one-whole one-third">
      <h5>pages</h5>
      <a href="/datadirectory/">Home</a>
      <i class="fa fa-circle" aria-hidden="true"></i>
      <a href="/datadirectory/about/">About this site</a>
      </ul>
      </div><div class="grid__item palm--one-whole one-third">
        <h5>More</h5>
        <a href="https://data.england.nhs.uk">Data Catalogue</a>
        <i class="fa fa-circle" aria-hidden="true"></i>
        <a href="https://github.com/nhsengland/datadirectory">Code on GitHub</a>
      </div>
    </div>
  </div>
  <div class="project-grid-outer-container">
    <div class="grid">
      <div class="grid__item palm--one-whole one-third small-links">
          <a href="http://www.england.nhs.uk/terms-and-conditions/">Terms & Conditions</a>
          <i class="fa fa-circle" aria-hidden="true"></i><a href="https://www.england.nhs.uk/privacy-policy/">Privacy & Cookies</a>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript" src="//assets.zendesk.com/external/zenbox/v2.6/zenbox.js"></script>
<style type="text/css" media="screen, projection">
  @import url(//assets.zendesk.com/external/zenbox/v2.6/zenbox.css);
</style>
<script type="text/javascript">
  if (typeof(Zenbox) !== "undefined") {
  Zenbox.init({
  dropboxID:   "20263731",
  url:         "https://nhse.zendesk.com",
  tabTooltip:  "Feedback",
  tabImageURL: "https://p3.zdassets.com/external/zenbox/images/tab_feedback.png",
  tabColor:    "#A00054",
  tabPosition: "Left"
  });
  var zenbox = document.getElementById("zenbox_tab");
  zenbox.setAttribute('data-intro', 'Click the "Feedback" tab to tell us your thoughts, report bugs and request features.');
  zenbox.setAttribute('data-position', 'right');
  }
</script>
<script>
  $("#feedback").click(function(){
      window.Zenbox.show();
      $("#zenbox_body").css("height", 400);
  });
</script>
<script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-51757615-1', 'england.nhs.uk');
      ga('send', 'pageview');
    </script>
  <script>document.getElementsByTagName('html')[0].className += ' js';</script>
<script type="text/javascript" src="/fanstatic/vendor/:version:2015-03-25T08:33:17.31/jquery.min.js"></script>
<script type="text/javascript" src="/fanstatic/vendor/:version:2015-03-25T08:33:17.31/:bundle:bootstrap/js/bootstrap.min.js;jed.min.js;select2/select2.min.js"></script>
<script type="text/javascript" src="/fanstatic/base/:version:2015-03-25T08:33:17.30/:bundle:plugins/jquery.inherit.min.js;plugins/jquery.proxy-all.min.js;plugins/jquery.url-helpers.min.js;plugins/jquery.date-helpers.min.js;plugins/jquery.slug.min.js;plugins/jquery.slug-preview.min.js;plugins/jquery.truncator.min.js;plugins/jquery.masonry.min.js;plugins/jquery.form-warning.min.js;sandbox.min.js;module.min.js;pubsub.min.js;client.min.js;notify.min.js;i18n.min.js;main.min.js;modules/select-switch.min.js;modules/slug-preview.min.js;modules/basic-form.min.js;modules/confirm-action.min.js;modules/api-info.min.js;modules/autocomplete.min.js;modules/custom-fields.min.js;modules/related-item.min.js;modules/data-viewer.min.js;modules/table-selectable-rows.min.js;modules/resource-form.min.js;modules/resource-upload-field.min.js;modules/resource-reorder.min.js;modules/follow.min.js;modules/activity-stream.min.js;modules/dashboard.min.js;modules/table-toggle-more.min.js;modules/dataset-visibility.min.js;modules/media-grid.min.js;modules/image-upload.min.js"></script>

  </body>
</html>
